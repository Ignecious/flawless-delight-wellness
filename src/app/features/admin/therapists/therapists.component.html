<div class="therapists-container">
  <!-- Therapist List View -->
  <div *ngIf="!showSchedule" class="therapist-list">
    <div class="therapist-header">
      <h2>Therapists</h2>
    </div>

    <div class="therapist-cards">
      <p-card *ngFor="let therapist of therapists" class="therapist-card">
        <ng-template pTemplate="header">
          <div class="card-header">
            <div class="therapist-avatar">
              {{ therapist.initials }}
            </div>
          </div>
        </ng-template>
        
        <div class="card-content">
          <h3>{{ therapist.name }}</h3>
          <div class="bookings-info">
            <span class="label">Today's Bookings:</span>
            <span class="count">{{ therapist.todayBookingsCount }}</span>
          </div>
        </div>

        <ng-template pTemplate="footer">
          <p-button 
            label="View Schedule" 
            icon="pi pi-calendar" 
            (onClick)="viewSchedule(therapist)"
            [style]="{ width: '100%' }"
          />
        </ng-template>
      </p-card>
    </div>
  </div>

  <!-- Therapist Schedule View -->
  <div *ngIf="showSchedule" class="therapist-schedule">
    <div class="schedule-header">
      <p-button 
        icon="pi pi-arrow-left" 
        [text]="true" 
        (onClick)="backToList()"
        label="Back to Therapists"
      />
      <h2>{{ selectedTherapist?.name }}'s Schedule</h2>
    </div>

    <div class="date-navigation">
      <div class="nav-buttons">
        <p-button 
          label="Previous Day" 
          icon="pi pi-chevron-left" 
          (onClick)="previousDay()" 
          [outlined]="true"
        />
        <p-button 
          label="Next Day" 
          icon="pi pi-chevron-right" 
          iconPos="right"
          (onClick)="nextDay()" 
          [outlined]="true"
        />
      </div>
      <h3 class="selected-date">{{ getFormattedDate() }}</h3>
    </div>

    <div class="schedule-table">
      <p-table [value]="timeSlots" [tableStyle]="{ 'min-width': '50rem' }">
        <ng-template pTemplate="header">
          <tr>
            <th>Time</th>
            <th>Treatment</th>
            <th>Customer</th>
            <th>Status</th>
          </tr>
        </ng-template>
        <ng-template pTemplate="body" let-slot>
          <tr>
            <td>{{ slot.time }}</td>
            <td>
              <span *ngIf="slot.booking">{{ slot.booking.treatment.name }}</span>
              <span *ngIf="!slot.booking" class="available">Available</span>
            </td>
            <td>
              <span *ngIf="slot.booking">{{ slot.booking.customer.name }}</span>
              <span *ngIf="!slot.booking">-</span>
            </td>
            <td>
              <p-badge 
                *ngIf="slot.booking" 
                [value]="slot.booking.status" 
                [severity]="getStatusSeverity(slot.booking.status)"
              />
              <span *ngIf="!slot.booking">-</span>
            </td>
          </tr>
        </ng-template>
      </p-table>
    </div>
  </div>
</div>
